function change_gallery_variable_quickview(a,i,e){var t=!0;if(_prev_qv_image_id&&e&&e.image_id&&(t=_prev_qv_image_id===e.image_id?!1:!0),e&&e.image&&e.image.src&&e.image.src.length>1){var n=a(i).find(".variations .value select").length,s=0;if(n&&a(i).find(".variations .value select").each(function(){""!==a(this).val()&&s++}),n&&s===n)if(_quicked_gallery=!1,"undefined"==typeof _lightbox_variations[e.variation_id]){if("undefined"!=typeof nasa_params_quickview&&"undefined"!=typeof nasa_params_quickview.wc_ajax_url){var o=nasa_params_quickview.wc_ajax_url.toString().replace("%%endpoint%%","nasa_quickview_gallery_variation");_nasa_calling_gallery=1;var r={variation_id:e.variation_id,is_purchasable:e.is_purchasable,is_in_stock:e.is_in_stock,main_id:"undefined"!=typeof e.image_id?e.image_id:0,gallery:"undefined"!=typeof e.nasa_gallery_variation?e.nasa_gallery_variation:[],show_images:a(".product-lightbox").find(".main-image-slider").attr("data-items")};a.ajax({url:o,type:"post",dataType:"json",cache:!1,data:{data:r},beforeSend:function(){a(i).hasClass("nasa-processing")||a(i).addClass("nasa-processing"),t&&(a("#nasa-quickview-sidebar.nasa-crazy-load").length?a(".nasa-product-gallery-lightbox").hasClass("crazy-loading")||a(".nasa-product-gallery-lightbox").addClass("crazy-loading"):(a(".nasa-product-gallery-lightbox").find(".nasa-loading").length<=0&&a(".nasa-product-gallery-lightbox").append('<div class="nasa-loading"></div>'),a(".nasa-product-gallery-lightbox").find(".nasa-loader").length<=0&&a(".nasa-product-gallery-lightbox").append('<div class="nasa-loader" style="top:45%"></div>'))),a(".nasa-product-gallery-lightbox").css({"min-height":a(".nasa-product-gallery-lightbox").outerHeight()})},success:function(t){_nasa_calling_gallery=0,a(i).removeClass("nasa-processing"),_lightbox_variations[e.variation_id]=t,"undefined"!=typeof t.quickview_gallery&&a(".nasa-product-gallery-lightbox").find(".main-image-slider").replaceWith(t.quickview_gallery),"undefined"!=typeof _timeout_quickviewGallery&&clearTimeout(_timeout_quickviewGallery),_timeout_quickviewGallery=setTimeout(function(){a(".nasa-product-gallery-lightbox").find(".nasa-loading, .nasa-loader").remove(),a(".nasa-product-gallery-lightbox").css({"min-height":"auto"}),a(".nasa-product-gallery-lightbox").removeClass("crazy-loading")},200),a("body").trigger("nasa_changed_gallery_variable_quickview")},error:function(){_nasa_calling_gallery=0,a(i).removeClass("nasa-processing"),a(".nasa-product-gallery-lightbox").find(".nasa-loading, .nasa-loader").remove(),a(".nasa-product-gallery-lightbox").removeClass("crazy-loading")}})}}else{var l=_lightbox_variations[e.variation_id];"undefined"!=typeof l.quickview_gallery&&(t&&(a("#nasa-quickview-sidebar.nasa-crazy-load").length?a(".nasa-product-gallery-lightbox").hasClass("crazy-loading")||a(".nasa-product-gallery-lightbox").addClass("crazy-loading"):(a(".nasa-product-gallery-lightbox").find(".nasa-loading").length<=0&&a(".nasa-product-gallery-lightbox").append('<div class="nasa-loading"></div>'),a(".nasa-product-gallery-lightbox").find(".nasa-loader").length<=0&&a(".nasa-product-gallery-lightbox").append('<div class="nasa-loader" style="top:45%"></div>'))),a(".nasa-product-gallery-lightbox").css({"min-height":a(".nasa-product-gallery-lightbox").height()}),a(".nasa-product-gallery-lightbox").find(".main-image-slider").replaceWith(l.quickview_gallery),"undefined"!=typeof _timeout_quickviewGallery&&clearTimeout(_timeout_quickviewGallery),_timeout_quickviewGallery=setTimeout(function(){a(".nasa-product-gallery-lightbox").find(".nasa-loader, .nasa-loading").remove(),a(".nasa-product-gallery-lightbox").removeClass("crazy-loading"),a(".nasa-product-gallery-lightbox").css({"min-height":"auto"})},100)),_nasa_calling_gallery=0,a("body").trigger("nasa_changed_gallery_variable_quickview")}}else if(!_quicked_gallery&&"undefined"!=typeof _lightbox_variations[0]){_quicked_gallery=!0;var l=_lightbox_variations[0];"undefined"!=typeof l.quickview_gallery&&a(".nasa-product-gallery-lightbox").find(".main-image-slider").replaceWith(l.quickview_gallery),a("body").trigger("nasa_changed_gallery_variable_quickview")}if(_prev_qv_image_id=e&&e.image_id?e.image_id:null,a(".nasa-quickview-product-deal-countdown").length&&(a(".nasa-quickview-product-deal-countdown").html(""),a(".nasa-quickview-product-deal-countdown").removeClass("nasa-show"),e&&e.variation_id&&e.is_in_stock&&e.is_purchasable)){var d=Date.now();"undefined"!=typeof e.deal_time&&e.deal_time&&e.deal_time.html&&e.deal_time.to>d&&("undefined"==typeof e.deal_time.from||e.deal_time.from<d)&&(a(".nasa-quickview-product-deal-countdown").html(e.deal_time.html),a("body").trigger("nasa_load_countdown"),a(".nasa-quickview-product-deal-countdown").hasClass("nasa-show")||a(".nasa-quickview-product-deal-countdown").addClass("nasa-show"))}}function change_image_variable_quickview(a,i,e){var t=a(i).parents(".product-item");if(e&&e.image&&e.image.src&&e.image.src.length>1){var n=a(i).find(".variations .value select").length,s=0;if(n&&a(i).find(".variations .value select").each(function(){""!==a(this).val()&&s++}),n&&s===n){var o=!1;if(a(".product-lightbox .woosb-product").length)("undefined"!==e.image.thumb_src||"undefined"!==e.image.gallery_thumbnail_src)&&(o=e.image.gallery_thumbnail_src?e.image.gallery_thumbnail_src:e.image.thumb_src),o&&(a(i).parents(".woosb-product").find(".woosb-thumb-new").html('<img src="'+o+'" />'),a(i).parents(".woosb-product").find(".woosb-thumb-ori").hide(),a(i).parents(".woosb-product").find(".woosb-thumb-new").show());else{var r="undefined"!=typeof e.image_single_page?e.image_single_page:e.image.url,l="undefined"!=typeof e.nasa_variation_back_img?e.nasa_variation_back_img:null;a(".main-image-slider img.nasa-first").attr("src",r).removeAttr("srcset"),a(i).parents(".product-item").length&&(a(i).parents(".product-item").find(".main-img img:first-child").attr("src",r).removeAttr("srcset"),null!==l&&a(i).parents(".product-item").find(".back-img").length&&a(i).parents(".product-item").find(".back-img img:first-child").attr("src",l).removeAttr("srcset"))}}}else if(a(".product-lightbox .woosb-product").length)a(i).parents(".woosb-product").find(".woosb-thumb-ori").show(),a(i).parents(".woosb-product").find(".woosb-thumb-new").hide();else{var d=a(".nasa-product-gallery-lightbox").attr("data-o_href");if(a(".main-image-slider img.nasa-first").attr("src",d).removeAttr("srcset"),a(t).length){var r=a(t).find(".main-img img:first-child").attr("data-o_href");a(t).find(".main-img img:first-child").attr("src",r)}}if(a("body").hasClass("nasa-focus-main-image")){var c=a(".main-image-slider");a("body").trigger("slick_go_to_0",[c])}if(a(".nasa-quickview-product-deal-countdown").length&&(a(".nasa-quickview-product-deal-countdown").html(""),a(".nasa-quickview-product-deal-countdown").removeClass("nasa-show"),e&&e.variation_id&&e.is_in_stock&&e.is_purchasable)){var u=Date.now();"undefined"!=typeof e.deal_time&&e.deal_time&&e.deal_time.html&&e.deal_time.to>u&&("undefined"==typeof e.deal_time.from||e.deal_time.from<u)&&(a(".nasa-quickview-product-deal-countdown").html(e.deal_time.html),a("body").trigger("nasa_load_countdown"),a(".nasa-quickview-product-deal-countdown").hasClass("nasa-show")||a(".nasa-quickview-product-deal-countdown").addClass("nasa-show"))}if(a(t).parents(".nasa-modern-8").length)if(a(t).find(".ns_pre_change_img").length){var g=a(t).find(".ns_pre_change_img"),v=a(g).attr("data-value"),_=a(g).attr("data-pa"),h=a(i).find('.nasa-attr-ux_wrap[data-attribute_name="attribute_pa_'+_+'"] .nasa-attr-ux[data-value="'+v+'"]');a(h).hasClass("nasa-disable")||a(h).hasClass("selected")||(a(h).trigger("click"),a(g).addClass("nasa-active").siblings().removeClass("nasa-active")),a(g).removeClass("ns_pre_change_img")}else{var p=a(i).find(".nasa-attr-ux_wrap .nasa-attr-ux.selected, .nasa-attr-ux_wrap .nasa-attr-ux.nasa-disable");a(t).find(".nasa-product-content-color-image-wrap.ns-modern-8 .nasa-attr-ux-item-modern-8").removeClass("nasa-active"),a(t).find(".nasa-product-content-color-image-wrap.ns-modern-8 .nasa-attr-ux-item-modern-8").removeClass("nasa-disable"),a(p).each(function(){var i=a(this),e=a(i).parents(".nasa-attr-ux_wrap").attr("data-attribute_name"),n=a(t).find('.nasa-product-content-color-image-wrap.ns-modern-8 .nasa-attr-ux-item-modern-8[data-value="'+a(i).attr("data-value")+'"][data-pa="'+e.replace("attribute_pa_","")+'"]');a(i).hasClass("selected")&&a(n).addClass("nasa-active"),a(i).hasClass("nasa-disable")&&a(n).addClass("nasa-disable")})}}function set_sku_content(a,i,e){var t=a(i).attr("data-o_content");"undefined"==typeof t&&a(i).attr("data-o_content",a(i).text()),a(i).text(e)}function reset_sku_content(a,i){var e=a(i).attr("data-o_content");"undefined"!=typeof e&&a(i).text(e)}if("undefined"==typeof _single_variations)var _single_variations=[];var _quicked_gallery=!0,_nasa_calling_gallery=0,_lightbox_variations,_qv_img_loaded,nasa_quick_viewimg=!1,quickview_html=[],setMaxHeightQVPU;jQuery(document).ready(function(a){"use strict";var i=a("body").hasClass("nasa-in-mobile")?!0:!1;a("body").on("quickview_popup_open",function(i,e){i.preventDefault();var t=a(".product-lightbox .nasa-product-gallery-lightbox").attr("data-o_href");"undefined"!=typeof _qv_img_loaded&&clearInterval(_qv_img_loaded),_qv_img_loaded=setInterval(function(){var i=new Image;i.src=t,i.onload=function(){a.magnificPopup.open({items:{src:"#nasa-quickview-popup",type:"inline"},closeMarkup:'<a class="nasa-mfp-close nasa-stclose" href="javascript:void(0);" title="'+a('input[name="nasa-close-string"]').val()+'"></a>',callbacks:{beforeOpen:function(){this.st.mainClass=this.st.mainClass+" nasa-left-to-right",setTimeout(function(){a(".mfp-wrap").addClass("ns-active")},100)},beforeClose:function(){this.st.removalDelay=500},afterClose:function(){"undefined"!=typeof setMaxHeightQVPU&&clearInterval(setMaxHeightQVPU)}}}),a(e).length&&a(e).find(".nasa-loader, .color-overlay, .nasa-dark-fog, .nasa-light-fog").remove(),a("body").trigger("nasa_after_quickview_timeout"),clearInterval(_qv_img_loaded)}},10)}),a("body").on("click",".quick-view",function(e){if(a.magnificPopup.close(),a(".ns-cart-popup-wrap").length&&a(".ns-cart-popup-wrap").hasClass("nasa-active")&&a(".ns-cart-popup-wrap .popup-cart-close").trigger("click"),nasa_quick_viewimg=!0,a(".nasa-close-notice").length&&a(".nasa-close-notice").trigger("click"),a("body").trigger("nasa_append_style_off_canvas"),"undefined"!=typeof nasa_params_quickview&&"undefined"!=typeof nasa_params_quickview.wc_ajax_url){var t=nasa_params_quickview.wc_ajax_url.toString().replace("%%endpoint%%","nasa_quick_view"),n=a(this),s=a(n).attr("data-product_type");if("woosb"===s&&"undefined"!=typeof a(n).attr("data-href"))window.location.href=a(n).attr("data-href");else{var o=a(n).parents(".product-item"),r=a(n).attr("data-prod"),l="1"===a(n).attr("data-from_wishlist")?"1":"0";a(o).length<=0&&(o=a(n).parents(".item-product-widget")),a(o).length<=0&&(o=a(n).parents(".wishlist-item-warper")),a(o).length&&a(o).append('<div class="nasa-light-fog"></div><div class="nasa-loader"></div>');var d={product:r,nasa_wishlist:l};a(".nasa-value-gets").length&&a(".nasa-value-gets").find("input").length&&a(".nasa-value-gets").find("input").each(function(){var i=a(this).attr("name"),e=a(this).val();d[i]=e});var c=1===a("#nasa-quickview-sidebar").length?!0:!1;c&&a("#nasa-quickview-sidebar").hasClass("nasa-crazy-load")&&(a("#nasa-quickview-sidebar").hasClass("qv-loading")||a("#nasa-quickview-sidebar").addClass("qv-loading")),d.quickview=c?"sidebar":"popup";var u=!0;if("undefined"!=typeof quickview_html[r]&&(u=!1),u)a.ajax({url:t,type:"post",dataType:"json",data:d,cache:!1,beforeSend:function(){c&&(a("#nasa-quickview-sidebar #nasa-quickview-sidebar-content").html('<div class="nasa-loader"></div>'),a(".black-window").fadeIn(200).addClass("desk-window"),a("body").hasClass("m-ovhd")||a("body").addClass("m-ovhd"),a("#nasa-viewed-sidebar").removeClass("nasa-active"),a("#nasa-quickview-sidebar").length&&!a("#nasa-quickview-sidebar").hasClass("nasa-active")&&a("#nasa-quickview-sidebar").addClass("nasa-active")),a(".nasa-static-wrap-cart-wishlist").length&&a(".nasa-static-wrap-cart-wishlist").hasClass("nasa-active")&&a(".nasa-static-wrap-cart-wishlist").removeClass("nasa-active"),"undefined"!=typeof setMaxHeightQVPU&&clearInterval(setMaxHeightQVPU)},success:function(e){quickview_html[r]=e,c?(a("#nasa-quickview-sidebar #nasa-quickview-sidebar-content").html('<div class="product-lightbox">'+e.content+"</div>"),setTimeout(function(){a("#nasa-quickview-sidebar #nasa-quickview-sidebar-content .product-lightbox").addClass("nasa-loaded"),a("body").trigger("nasa_after_quickview_timeout")},50),setTimeout(function(){a("#nasa-quickview-sidebar").hasClass("qv-loading")&&a("#nasa-quickview-sidebar").removeClass("qv-loading")},100),a(o).length&&a(o).find(".nasa-loader, .color-overlay, .nasa-dark-fog, .nasa-light-fog").remove()):(a("#nasa-quickview-popup").length<1&&a("body").append('<div id="nasa-quickview-popup" class="product-lightbox"></div>'),a("#nasa-quickview-popup").html(e.content),a(".black-window").trigger("quickview_popup_open",[o]),a(".black-window").trigger("click")),a("body").trigger("nasa_init_product_gallery_lightbox"),a(n).hasClass("nasa-view-from-wishlist")&&(a(".wishlist-item").animate({opacity:1},500),c||a(".wishlist-close a").trigger("click")),a("body").trigger("before_init_variations_form");var t=a(".product-lightbox").find(".variations_form");a(t).length&&(a(t).find(".single_variation_wrap").hide(),a(t).each(function(){var i=a(this);a("body").trigger("init_quickview_variations_form",[i]),a(i).find("select").trigger("change"),a(i).find('.variations select option[selected="selected"]').length&&a(i).find(".variations .reset_variations").css({visibility:"visible"}).show()}));var s=a(".product-lightbox").find(".woocommerce-grouped-product-list-item");a(s).length&&(a(s).removeAttr("style"),a(s).removeClass("wow")),c||(setMaxHeightQVPU=setInterval(function(){var e=a(".product-lightbox .product-img").outerHeight();a(".product-lightbox .product-quickview-info").css({"max-height":e,"overflow-y":"auto"}),a(".product-lightbox .product-quickview-info").hasClass("nasa-active")||a(".product-lightbox .product-quickview-info").addClass("nasa-active"),i&&clearInterval(setMaxHeightQVPU)},100)),a("body").trigger("nasa_after_quickview")}});else{var g=quickview_html[r];c&&(a("#nasa-quickview-sidebar #nasa-quickview-sidebar-content").html('<div class="nasa-loader"></div>'),a(".black-window").fadeIn(200).addClass("desk-window"),a("body").hasClass("m-ovhd")||a("body").addClass("m-ovhd"),a("#nasa-viewed-sidebar").removeClass("nasa-active"),a("#nasa-quickview-sidebar").length&&!a("#nasa-quickview-sidebar").hasClass("nasa-active")&&a("#nasa-quickview-sidebar").addClass("nasa-active")),a(".nasa-static-wrap-cart-wishlist").length&&a(".nasa-static-wrap-cart-wishlist").hasClass("nasa-active")&&a(".nasa-static-wrap-cart-wishlist").removeClass("nasa-active"),"undefined"!=typeof setMaxHeightQVPU&&clearInterval(setMaxHeightQVPU),c?(a("#nasa-quickview-sidebar #nasa-quickview-sidebar-content").html('<div class="product-lightbox hidden-tag">'+g.content+"</div>"),setTimeout(function(){a("#nasa-quickview-sidebar #nasa-quickview-sidebar-content .product-lightbox").show(),a("body").trigger("nasa_after_quickview_timeout")},50),setTimeout(function(){a("#nasa-quickview-sidebar").hasClass("qv-loading")&&a("#nasa-quickview-sidebar").removeClass("qv-loading")},100),a(o).length&&a(o).find(".nasa-loader, .color-overlay, .nasa-dark-fog, .nasa-light-fog").remove()):(a("#nasa-quickview-popup").length<1&&a("body").append('<div id="nasa-quickview-popup" class="product-lightbox"></div>'),a("#nasa-quickview-popup").html(g.content),a(".black-window").trigger("quickview_popup_open",[o]),a(".black-window").trigger("click")),a("body").trigger("nasa_init_product_gallery_lightbox"),a(n).hasClass("nasa-view-from-wishlist")&&(a(".wishlist-item").animate({opacity:1},500),c||a(".wishlist-close a").trigger("click")),a("body").trigger("before_init_variations_form");var v=a(".product-lightbox").find(".variations_form");a(v).length&&(a(v).find(".single_variation_wrap").hide(),a(v).each(function(){var i=a(this);a("body").trigger("init_quickview_variations_form",[i]),a(i).find("select").trigger("change"),a(i).find('.variations select option[selected="selected"]').length&&a(i).find(".variations .reset_variations").css({visibility:"visible"}).show()}));var _=a(".product-lightbox").find(".woocommerce-grouped-product-list-item");a(_).length&&(a(_).removeAttr("style"),a(_).removeClass("wow")),c||(setMaxHeightQVPU=setInterval(function(){var e=a(".product-lightbox .product-img").outerHeight();a(".product-lightbox .product-quickview-info").css({"max-height":e,"overflow-y":"auto"}),a(".product-lightbox .product-quickview-info").hasClass("nasa-active")||a(".product-lightbox .product-quickview-info").addClass("nasa-active"),i&&clearInterval(setMaxHeightQVPU)},100)),a("body").trigger("nasa_after_quickview")}}}e.preventDefault()}),a("body").on("init_quickview_variations_form",function(i,e){i.preventDefault(),a(e).length&&(a(e).wc_variation_form(),a(e).nasa_quickview_variation_form(),a("body").trigger("nasa_init_ux_variation_form"))}),a.fn.nasa_quickview_variation_form=function(){return this.each(function(){var i=a(this);a(i).on("found_variation",function(i,e){i.preventDefault();var t=a(this),n=a(t).parents(".product-info").find(".product_meta .sku");a(n).length&&(e.sku?set_sku_content(a,n,e.sku):reset_sku_content(a,n)),a(t).hasClass("variations_form-3rd")||(a(t).find(".nasa-gallery-variation-supported").length?a(t).parents(".product-item").hasClass("ns-var-loaded")?setTimeout(function(){change_image_variable_quickview(a,t,e)},10):change_gallery_variable_quickview(a,t,e):setTimeout(function(){change_image_variable_quickview(a,t,e)},10)),a(t).find(".add-request-quote-button").length&&a(t).find(".add-request-quote-button").removeClass("disabled")}).on("reset_data",function(i){i.preventDefault();var e=a(this),t=a(e).parents(".product-info").find(".product_meta .sku");a(t).length&&reset_sku_content(a,t),a(e).hasClass("variations_form-3rd")||(a(e).find(".nasa-gallery-variation-supported").length?a(e).parents(".product-item").hasClass("ns-var-loaded")?setTimeout(function(){change_image_variable_quickview(a,e,null)},10):change_gallery_variable_quickview(a,e,null):setTimeout(function(){change_image_variable_quickview(a,e,null)},10)),a(e).find(".add-request-quote-button").length&&!a(e).find(".add-request-quote-button").hasClass("disabled")&&a(e).find(".add-request-quote-button").addClass("disabled")})})},a("body").on("nasa_changed_gallery_variable_quickview",function(){a("body").trigger("nasa_load_slick_slider")}),a("body").on("nasa_init_product_gallery_lightbox",function(){a(".product-lightbox").find(".nasa-product-gallery-lightbox").length&&(_lightbox_variations[0]={quickview_gallery:a(".product-lightbox").find(".nasa-product-gallery-lightbox").html()})}),a("body").on("nasa_after_close_fog_window",function(){a("#nasa-quickview-popup.product-lightbox").length<1&&(nasa_quick_viewimg=!1)}),a("body").on("click",".ajax_add_to_cart_variable",function(){return a(this).parent().find(".quick-view").length?(a(this).parent().find(".quick-view").trigger("click"),!1):void 0}),a("body").on("nasa_after_quickview",function(){if(a("body").trigger("yith-wcbk-init-booking-form"),a("body").trigger("yith-wcbk-init-fields:selector"),a("body").trigger("yith-wcbk-init-fields:help-tip"),a("body").trigger("yith-wcbk-init-fields:select-list"),a(".product-lightbox .yith-ywraq-add-to-quote").length>1){var i=0;a(".product-lightbox .yith-ywraq-add-to-quote").each(function(){var e=a(this);i>0&&a(e).remove(),i++})}}),a("body").on("nasa_init_ux_variation_form",function(){a("body").trigger("qv_loader_stop")})});var _timeout_quickviewGallery,_prev_qv_image_id=0;